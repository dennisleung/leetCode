<!DOCTYPE html>
<body>
<script>

function ListNode(val) {
    this.val = val;
    this.next = null;
}

function TreeNode(val) {
    this.val = val;
    this.left = null;
    this.right = null;
}

const makeLink = (arr)=>{
    if(!arr.length) {
        return null;
    }
    let head = cur = new ListNode();
    arr.forEach((v)=>{
        cur.next = new ListNode(v);
        cur = cur.next;
    });

    return head.next;
}

const makeTree = (arr)=>{
    let head = new TreeNode(arr.shift());
    let nodes = [head];
    while(arr.length) {
        let node = nodes.shift();
        let left = arr.shift();
        let right = arr.shift();
        if(left) {
            node.left = new TreeNode(left);
            nodes.push(node.left);
        }
        if(right) {
            node.right = new TreeNode(right);
            nodes.push(node.right);
        }
    }

    return head;
}

var wordPattern = function(pattern, str) {
    const aArr = pattern.split("");
    const bArr = str.split(" ");
    const aMap = {};
    const bMap = {};
    if(aArr.length!=bArr.length) {
        return false;
    }
    for(let i = 0, len = aArr.length; i<len; i++) {
        let a = aArr[i];
        let aIndex = aMap[a];
        if(aIndex===void 0) {
            aIndex = i;
            aMap[a] = i;
        }

        let b = bArr[i];
        let bIndex = bMap[b];
        if(bIndex===void 0) {
            bIndex = i;
            bMap[b] = i;
        }

        if(aIndex!=bIndex) {
            return false;
        }
    }

    return true;
};

console.log(wordPattern('aaaa', 'dog cat cat dog'));
</script>
</body>