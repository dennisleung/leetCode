<!DOCTYPE html>
<body>
<script>

function ListNode(val) {
    this.val = val;
    this.next = null;
}

function TreeNode(val) {
    this.val = val;
    this.left = null;
    this.right = null;
}

const makeLink = (arr)=>{
    if(!arr.length) {
        return null;
    }
    let head = cur = new ListNode();
    arr.forEach((v)=>{
        cur.next = new ListNode(v);
        cur = cur.next;
    });

    return head.next;
}

const makeTree = (arr)=>{
    let head = new TreeNode(arr.shift());
    let nodes = [head];
    while(arr.length) {
        let node = nodes.shift();
        let left = arr.shift();
        let right = arr.shift();
        if(left) {
            node.left = new TreeNode(left);
            nodes.push(node.left);
        }
        if(right) {
            node.right = new TreeNode(right);
            nodes.push(node.right);
        }
    }

    return head;
}

function Node(val,isLeaf,topLeft,topRight,bottomLeft,bottomRight) {
    this.val = val;
    this.isLeaf = isLeaf;
    this.topLeft = topLeft;
    this.topRight = topRight;
    this.bottomLeft = bottomLeft;
    this.bottomRight = bottomRight;
};

function TreeNode2(val, children) {
    this.val = val;
    this.children = children;
}

const travels = function(root) {
    let nodes = [];
    let queue = [root];
    while(queue.length) {
        let node = queue.shift();
        nodes.push(node);
        if(node.left) {
            queue.push(node.left);
        }
        if(node.right) {
            queue.push(node.right);
        }
    }

    return nodes;
};


const getCombinations = function(arr) {
    const result = [];
    
};

const isAnagrams = function(aStr, bStr) {
    let aMap = {};
    for(let ch of aStr) {
        aMap[ch] = (aMap[ch] || 0) + 1;
    }
    
    for(let ch of bStr) {
        aMap[ch] = (aMap[ch] || 0) - 1;
        if(aMap[ch]<0) {
            return false;
        }
    }

    for(let ch in aMap) {
        if(aMap[ch]) {
            return false;
        }
    }

    return true;
};


/**
 * @param {string} s
 * @param {string} p
 * @return {number[]}
 */
var findAnagrams = function(s, p) {
    const pMap = {};
    for(let ch of p) {
        pMap[ch] = 1;
    }

    const _findAnagrams = function(s, startIndex) {
        if(!s.length || !p.length || s.length<p.length) {
            return [];
        }

        const result = [];
        for(let i = 0, max = s.length-p.length; i<=max; i++) {
            if(isAnagrams(s.slice(i, i+p.length), p)) {
                result.push(startIndex+i);
            }
        }

        return result;
    };

    let result = [];
    let preNotMatch = 0;
    for(let i = 0, len = s.length; i<len; i++) {
        if(!pMap[s[i]] || i==s.length-1) {
            result = result.concat(_findAnagrams(s.slice(preNotMatch, i+1), preNotMatch));
            preNotMatch = i;
        }
    }

    return result;
};

console.log(findAnagrams('cbaebabacd', 'abc'));
</script>
</body>